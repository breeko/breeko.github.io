<!DOCTYPE html>
<link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">

<html prefix="og: http://ogp.me/ns#">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Reddit Bots, Drinking from the Fire Hose and Image Colorization &middot; Branko Blagojevic</title>
        <meta name="description" content="My latest obsession has been writing bots for Reddit. Reddit is an online forum that hosts a range of topics, everything from news and…
My latest obsession has been writing bots for Reddit. Reddit is an online forum that hosts a range of topics, everything from news and politics to strange, possibly nsfw captions to WikiHow images. But mostly, it’s just memes.
What’s nice about Reddit is the sheer volume of content.">
        <meta name="HandheldFriendly" content="True">
        <meta name="MobileOptimized" content="320">
        <meta name="generator" content="Hugo 0.68.3" />
        <meta name="robots" content="index,follow">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta property="og:title" content="Reddit Bots, Drinking from the Fire Hose and Image Colorization">
<meta property="og:description" content="My latest obsession has been writing bots for Reddit. Reddit is an online forum that hosts a range of topics, everything from news and…
My latest obsession has been writing bots for Reddit. Reddit is an online forum that hosts a range of topics, everything from news and politics to strange, possibly nsfw captions to WikiHow images. But mostly, it’s just memes.
What’s nice about Reddit is the sheer volume of content.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://breeko.github.io/post/2018-09-07_reddit-bots-drinking-from-the-fire-hose-and-image-colorization/">
        <link rel="stylesheet" href="https://breeko.github.io/dist/styles.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,600,700,300&subset=latin,cyrillic-ext,latin-ext,cyrillic">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
        
        
        
        
<script type="application/javascript">
var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
var doNotTrack = (dnt == "1" || dnt == "yes");
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-58509378-4', 'auto');
	ga('set', 'anonymizeIp', true);
	ga('send', 'pageview');
}
</script>

    </head>
    <body>
        
<script type="application/javascript">
var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
var doNotTrack = (dnt == "1" || dnt == "yes");
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-58509378-4', 'auto');
	ga('set', 'anonymizeIp', true);
	ga('send', 'pageview');
}
</script>


        <div id="wrapper">
            <header class="site-header">
                <div class="container">
                    <div class="site-title-wrapper">
                        
                            <h1 class="site-title">
                                <a title="ML-Everything" href="https://breeko.github.io/">ML-Everything</a>
                            </h1>
                        
                        <a class="button-square" href="https://breeko.github.io/index.xml"><i class="fa fa-rss"></i></a>
                        
                        
                        
                            <a class="button-square button-social hint--top" data-hint="Github" title="Github" href="https://github.com/breeko">
                                <i class="fa fa-github-alt"></i>
                            </a>
                        
                        
                        
                        
                        
                            <a class="button-square button-social hint--top" data-hint="Email" title="Email" href="mailto:branko.blagojevic@gmail.com">
                                <i class="fa fa-envelope"></i>
                            </a>
                        
                    </div>

                    <ul class="site-nav">
                        
    <li class="site-nav-item">
        <a title="Blog" href="/">Blog</a>
    </li>

    <li class="site-nav-item">
        <a title="Tags" href="/tags">Tags</a>
    </li>

                    </ul>
                </div>
            </header>

            <div id="container">


<div class="container">
    <article class="post-container" itemscope="" itemtype="http://schema.org/BlogPosting">
        <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Reddit Bots, Drinking from the Fire Hose and Image Colorization</h1>
    
    <p class="post-date post-line">
        <span>Published <time datetime="2018-09-07" itemprop="datePublished">Fri, Sep 7, 2018</time></span>
        <span>by</span>
        <span itemscope="" itemprop="author" itemtype="https://schema.org/Person">
            <span itemprop="name">
                <a href="#" itemprop="url" rel="author">Branko Blagojevic</a>
            </span>
        </span>
    </p>
    
</header>

        <div class="post-content clearfix" itemprop="articleBody">
    

    <p>My latest obsession has been writing bots for Reddit. Reddit is an online forum that hosts a range of topics, everything from news and…</p>
<p>My latest obsession has been writing bots for <a href="https://www.reddit.com">Reddit</a>. Reddit is an online forum that hosts a range of topics, everything from <a href="https://www.reddit.com/r/news">news</a> and <a href="https://www.reddit.com/r/politics/">politics</a> to <a href="https://www.reddit.com/r/disneyvacation/">strange, possibly nsfw captions to WikiHow images</a>. But mostly, it’s just <a href="https://www.reddit.com/r/dankmemes/">memes</a>.</p>
<p>What’s nice about Reddit is the sheer volume of content. <a href="https://www.statista.com/statistics/443332/reddit-monthly-visitors/">Apparently 6% of internet users in the US used the social network</a>, so its a treasure trove of user generated content. But the best part is the Reddit API, specifically <a href="https://praw.readthedocs.io/en/latest/">PRAW</a>, the python API wrapper. PRAW does all the rate limiting for you and lets you drink from the proverbial fire hose by streaming every post or comment posted to the site live. That’s around <a href="https://expandedramblings.com/index.php/reddit-stats/">11mm monthly posts 2.8mm daily comments</a>. And you can scrape them all with:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">for</span> c <span style="color:#f92672">in</span> r<span style="color:#f92672">.</span>subreddit(<span style="color:#e6db74">&#34;all&#34;</span>)<span style="color:#f92672">.</span>stream<span style="color:#f92672">.</span>comments(pause_after<span style="color:#f92672">=-</span><span style="color:#ae81ff">1</span>):  
  do_something(c)
</code></pre></div><p>Well, not exactly. I do notice comments fly under the radar and don’t trigger my bots correctly, which I think is due to the internal workings of PRAW rate limiting or latency on my end.</p>
<p>And adding app authorization is as simple as Settings -&gt; App Authorization -&gt; Create Application.</p>
<p><img src="/post/resources/img/1*zzO7iwPIk5YegL6Muk7UhQ.png" alt=""></p>
<p>Don’t worry, only name and redirect uri are actually required and redirect uri can be localhost</p>
<p>Create as many apps as you want. Create as many account as you want with one email.</p>
<blockquote>
<p>Ease of access and a good API play no small role in Reddit’s success.</p>
</blockquote>
<p>API doesn’t just benefit people like me, but also the hundreds of moderators making sure everyone stays in line. Reddit de-centralized the moderation process, <a href="https://en.wikipedia.org/wiki/Reddit#Controversies">although controversies still exist</a>.</p>
<h4 id="drinking-from-the-firehose">Drinking From the Fire Hose</h4>
<p>Despite the ease of the API, some boiler plate is required. As with most things involving web-scraping, it mostly includes wrapping everything up in a try-except and logging. When you’re drinking from the fire hose and you start to choke, you just have to step back for a second and keep going.</p>
<p>I wrote a simple bot platform that I’ll eventually write a post on. It allows me to write a bot. Here is an <a href="https://www.reddit.com/user/repliesnice">example of a bot</a> that replies “Nice” to comments that have at least 2 consecutive replies of “Nice” (don’t ask, it’s a Reddit thing).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> bot <span style="color:#f92672">import</span> Bot  
<span style="color:#f92672">import</span> re  
<span style="color:#f92672">from</span> utils.utils <span style="color:#f92672">import</span> get_commented_posts  
<span style="color:#f92672">from</span> praw.models.reddit.comment <span style="color:#f92672">import</span> Comment

NAME <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;RepliesNice&#34;</span>

already_commented <span style="color:#f92672">=</span> get_commented_posts(<span style="color:#e6db74">&#34;logs/{}.log&#34;</span><span style="color:#f92672">.</span>format(NAME))  
NICE <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Nice&#34;</span>  
ACCEPTABLE_NICE <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;Nice&#34;</span>, <span style="color:#e6db74">&#34;Nice.&#34;</span>}

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">action</span>(p, c, test):  
 <span style="color:#66d9ef">global</span> already_commented  
 already_commented <span style="color:#f92672">=</span> already_commented<span style="color:#f92672">.</span>union(set([p<span style="color:#f92672">.</span>id]))  
 <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> test:  
  r <span style="color:#f92672">=</span> c<span style="color:#f92672">.</span>reply(NICE)  
  r<span style="color:#f92672">.</span>disable_inbox_replies()  
 <span style="color:#66d9ef">return</span> NICE

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_comment_body</span>(comment):  
 <span style="color:#66d9ef">if</span> type(comment) <span style="color:#f92672">is</span> Comment:  
  <span style="color:#66d9ef">return</span> comment<span style="color:#f92672">.</span>body

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_bot</span>():  
 bot <span style="color:#f92672">=</span> Bot(NAME)  
 bot<span style="color:#f92672">.</span>is_valid_post <span style="color:#f92672">=</span> <span style="color:#66d9ef">lambda</span> p : <span style="color:#f92672">not</span> p<span style="color:#f92672">.</span>archived <span style="color:#f92672">and</span> p<span style="color:#f92672">.</span>id <span style="color:#f92672">not</span> <span style="color:#f92672">in</span> already_commented   
 bot<span style="color:#f92672">.</span>is_valid_comment <span style="color:#f92672">=</span> <span style="color:#66d9ef">lambda</span> c: c<span style="color:#f92672">.</span>body <span style="color:#f92672">in</span> ACCEPTABLE_NICE <span style="color:#f92672">and</span> get_comment_body(c<span style="color:#f92672">.</span>parent()) <span style="color:#f92672">in</span> ACCEPTABLE_NICE  
 bot<span style="color:#f92672">.</span>action <span style="color:#f92672">=</span> action  
 <span style="color:#66d9ef">return</span> bot

<span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;__main__&#34;</span>:  
 bot <span style="color:#f92672">=</span> get_bot()  
 bot<span style="color:#f92672">.</span>monitor_comments_live(<span style="color:#e6db74">&#34;all&#34;</span>)
</code></pre></div><p>Here’s the bot in action reaping some of that sweet, sweet Reddit karma</p>
<p><img src="/post/resources/img/1*Qojk3kpWoaLi7MxTLhZn0w.png" alt=""></p>
<p>Other bots include</p>
<ol>
<li><a href="https://www.reddit.com/user/___alexa___">A bot that is triggered by “Alexa play [song]” and returns a YouTube link</a></li>
<li><a href="https://www.reddit.com/user/b0trank">A bot that’s triggered by “[Good|Bad] bot” and tracks votes</a> and <a href="https://botrank.pastimes.eu/">accompanying website</a></li>
<li><a href="https://www.reddit.com/user/addedcolor">A bot that colorizes images</a></li>
<li><a href="https://www.reddit.com/user/zoom-in-enhance">A bot that enhances images</a> (currently offline)</li>
<li>A bot that downloads comments for nefarious nlp purposes</li>
</ol>
<h3 id="colorizer-bot">Colorizer Bot</h3>
<p>My favorite bot is the <a href="https://www.reddit.com/user/addedcolor">colorizer bot</a>, which trolls subreddits <a href="https://www.reddit.com/r/pics">pics</a>, <a href="https://www.reddit.com/r/images">images</a>, <a href="https://www.reddit.com/r/OldSchoolCool/">oldschoolschool</a>, and <a href="https://www.reddit.com/r/historyporn">historyporn</a> — recently banned on historyporn :-(</p>
<p>The bot is based on the <a href="https://github.com/richzhang/colorization">Colorful Image Colorization</a> repo. The bot downloads every image posted on these subreddits, checks if they’re black and white and if so spins up a docker image to process the image and uploads it to imgur. The bot can also be triggered from outside subreddits by the keyword “colorize”.</p>
<p><a href="https://www.reddit.com/r/funny/comments/9cvgrn/genderspecific_colors_when_youre_expecting/e5dvq2w/?context=3">Here’s an example</a> of FDR as a boy:</p>
<figure>
    <img src="/post/resources/img/1*JxGy6Xbu8s2qT7zkPzEyAQ.png"/> <figcaption>
            <h4>FDR as a boy. A very pretty boy</h4>
        </figcaption>
</figure>

<p>The results are hit-or-miss. One problem is that many of the images processed are black and white because they’re old, and the neural network was trained on modern images.</p>
<p><img src="post/resources/img/1*e1NB_2JKVscPC3muY1r8Ww.png" alt=""></p>
<p>Practically every modern image that just had its color removed came out great.</p>
<p><img src="post/resources/img/1*Z2qiR5JoyPgKReQaXmYAAg.png" alt=""></p>
<p><img src="post/resources/img/1*5wGnxBx8Y0SgFeeWSt-9fw.png" alt=""></p>
<p><img src="post/resources/img/1*oLsHI9-OK28wnqi0c4ADYA.png" alt=""></p>
<p>The solution to this would be to tweak the model on more colorized historical images, and of course there’s a <a href="https://www.reddit.com/r/colorizedhistory">subreddit for that</a>. If only there were an easy way to write a bot to gather and process all those submissions…</p>
<blockquote>
<p>Your model is only as good as its training data.</p>
</blockquote>
<p>The other problem is that the criteria of back and white is <a href="https://www.reddit.com/r/fireemblem/comments/9cywej/i_drew_my_fiance_and_i_as_a_malig_knight_and/e5e5wep/?context=3">not fool-proof</a>.</p>
<p><img src="/post/resources/img/1*DcVZ7sAjNvYJrk42QJ3Rqg.png" alt=""></p>
<p>To fix that perhaps I could compare the similarity of the original and finalized image and ensure that something more than a light shading of a persons hair was made. But I actually like these happy little accidents.</p>
<h3 id="more-bots">More Bots</h3>
<p>I’ll continue working on new and novel bots and post my bot management system when I clean it up. The biggest obstacle is developing useful bots and rather than novelty bots. If you look at the <a href="https://botrank.pastimes.eu/">most popular bots</a>, you’ll see a lot of them are very niche. The other problem is triggering the bots. Many of the most popular bots have keywords that people purposely trigger, which proves their utility. But the trigger can only become known with popularity. So it’s a bit of chicken and the egg problem. You can harp on to a common expression, as I did with “Alexa, play [song]” or just troll an entire subreddit. But post too much and you’ll get banned.</p>
<p>Here are some ideas for future bots I may or may not work on:</p>
<ol>
<li>Bullshit Bot — Checks comments for declarative statements (e.g. I was born in [location]) and cross references them with other statements from that users history, and if they conflict, calls bullshit</li>
<li>Enhance! Bot — Triggered by Enhance! Enhances image resolution. The problem with this one is that it takes more resources that my server can’t support just yet. I’m considering creating an aws lambda instance to process all my image processing bots</li>
<li>Turing Bot — Just a chat bot that replies selectively based on similar threads that it has processed. It can be trained to have a particular sentiment or be tailor made for a particular group of subreddits</li>
<li>Joke Explain Bot — A bot that explains jokes. There was a “<a href="https://www.reddit.com/r/Jokes/comments/3k067g/jokeexplainbot/">bot</a>” that did this although it was almost certainly someone manually explaining jokes trying to pass off as a bot.</li>
</ol>
<p>Example:</p>
<p>I always park in handicapped spaces at the hospital, just to test their patients</p>
<p>Explanation:</p>
<p><strong>Patients</strong> sounds like <strong>patience</strong>.</p>
<p>Or another:</p>
<p>A nun at a Catholic School was asking her 10 year old students what they wanted to be when they grew up.<br>
“Susie, what do you want to be when you grow up?”</p>
<p>Susie said “I want to be a doctor.”</p>
<p>“Very nice,” the nun said. “Jenny what do you want to be when you grow up?”</p>
<p>Jenny said “I want to be a teacher.”</p>
<p>“Excellent answer,” the nun replied. “Martha what are you going to be when you grow up.”</p>
<p>Martha replies “I want to be a prostitute.”</p>
<p>Hearing that the nun faints.</p>
<p>The little girls all rush forward to the nun laying on the ground and try to help her. Shortly the nun regains consciousness And says in a weak voice “Martha what did you just say you wanted to be when you grew up?”</p>
<p>Martha says “I said I wanted to be a prostitute.”</p>
<p>“Oh thank goodness,” the nun said “for a moment I thought you said you wanted to be a Protestant.”</p>
<pre><code>
Explanation

**Catholics** are stereotypically perceived to dislike **Protestants**.

This can _probably_ be done with a neural network, but it is likely not a trivial problem and may have to be limited in scope. Either way, if it can be done, Reddit would be the perfect place to train and launch.

By Branko Blagojevic on September 7, 2018
</code></pre>
</div>

        <footer class="post-footer clearfix">
    

    <div class="share">
        
            <a class="icon-twitter" href="https://twitter.com/share?text=Reddit%20Bots%2c%20Drinking%20from%20the%20Fire%20Hose%20and%20Image%20Colorization&url=https%3a%2f%2fbreeko.github.io%2fpost%2f2018-09-07_reddit-bots-drinking-from-the-fire-hose-and-image-colorization%2f"
                onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                <i class="fa fa-twitter"></i>
                <span class="hidden">Twitter</span>
            </a>
        

        
            <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fbreeko.github.io%2fpost%2f2018-09-07_reddit-bots-drinking-from-the-fire-hose-and-image-colorization%2f"
                onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                <i class="fa fa-facebook"></i>
                <span class="hidden">Facebook</span>
            </a>
        

        
        
    </div>
</footer>

        
    </article>
</div>

            </div>
        </div>

        <footer class="footer">
            <div class="container">
                <div class="site-title-wrapper">
                    <h1 class="site-title">
                        <a title="ML-Everything" href="https://breeko.github.io/">ML-Everything</a>
                    </h1>
                    <a class="button-square button-jump-top js-jump-top" href="#">
                        <i class="fa fa-angle-up"></i>
                    </a>
                </div>

                <p class="footer-copyright">
                    <span>&copy; 2020 / Powered by <a href="https://gohugo.io/">Hugo</a></span>
                </p>
                <p class="footer-copyright">
                    <span><a href="https://github.com/roryg/ghostwriter">Ghostwriter theme</a> By <a href="http://jollygoodthemes.com">JollyGoodThemes</a></span>
                    <span>/ <a href="https://github.com/jbub/ghostwriter">Ported</a> to Hugo By <a href="https://github.com/jbub">jbub</a></span>
                </p>
            </div>
        </footer>

        <script src="https://breeko.github.io/js/jquery-1.11.3.min.js"></script>
        <script src="https://breeko.github.io/js/jquery.fitvids.js"></script>
        
        
            <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        
        
        <script src="https://breeko.github.io/js/scripts.js"></script>
    </body>
</html>

